---
title: "Height_Profile"
author: "Flueckiger_Rubens"
date: "2025-04-01"
output: html_document
---

# Height Profile

This file calculates the height profile along both the short and long route. Differences between the GPS device and the digital elevation model (DEM) are displayed.

## Import packages


```{r}
library(ggplot2)
```

## Import files

```{r}
l_lap = read.table("../data/Distanz_&_Hohe_GR_2.csv", sep = ";", header = T)
s_lap = read.table("../data/Distanz_&_Hohe_KR.csv", sep = ";", header = T)
```

## Plot

Color code

```{r}
colors = c("DEM_(Swisstopo)" = "black", "GPS_(Messwagen)" = "red")
```

Plot

```{r}

#Open jpeg
jpeg("../Images/Height_Profile/Height_Profiles.jpeg", height = 486, width = 1200, res = 108)

#Long Route
p1 = ggplot(l_lap, aes(x = Distanz_Runsum)) + #x-Axis
  geom_line(aes(y = Height_GIS1, color = "DEM_(Swisstopo)")) + #DEM Line
  geom_line(aes(y = Height, color = "GPS_(Messwagen)")) + #GPS Line
  labs(y = "Höhe über Meer [m]", x = "Distanz [m]", color = " ") + #Axis Label & Legend
  ggtitle("Höhenprofil der langen Runde") + #Title
  scale_color_manual(values = colors) + #Color Legend
  theme_bw() + #Plot astetics
  theme(legend.position = "none") +
  annotate(geom = "label", x = 0, y = 598, label = "I", family = "serif", size = 6) + #Plot number
  theme(plot.margin = margin(0.2, 2.2, 0.2, 0.2, "cm")) + #Set Plot margins
  theme(plot.title = element_text(hjust = 0.5)) #Center title

#Short Route
p2 = ggplot(s_lap, aes(x = Distanz_Runsum)) + #x-Axis
  geom_line(aes(y = Height_GIS1, color = "DEM_(Swisstopo)")) + #DEM Line
  geom_line(aes(y = Height, color = "GPS_(Messwagen)")) + #GPS Line
  labs(y = "Höhe über Meer [m]", x = "Distanz [m]", color = " ") + #Axis Label & Legend
  ggtitle("Höhenprofil der kurzen Runde") + #Title
  scale_color_manual(values = colors) + #Color Legend
  theme_bw() + #Plot astetics
  annotate(geom = "label", x = 500, y = 575.5, label = "II", family = "serif", size = 6) + #Plot number
  theme(plot.margin = margin(0.2, 0.1, 0.2, -1.3, "cm")) + #Set Plot margins
  theme(plot.title = element_text(hjust = 0.5)) #Center title

#Combine both plots
cowplot::plot_grid(p1, p2)

#Close and save jpeg
dev.off()

```
